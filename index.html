<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 北海道九天八夜夢幻旅程</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f6f2;
            color: #3f3d3d;
            margin: 0;
            padding: 0;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .card {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            background-color: #fff;
        }
        .pill-tab-button {
            border-radius: 9999px;
            padding: 10px 20px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            border: 1px solid transparent;
        }
        .pill-tab-button.active {
            background-color: #e5dcd1;
            border-color: #e5dcd1;
            color: #3f3d3d;
        }
        .pill-tab-button:hover:not(.active) {
            background-color: #f0f0ed;
        }
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        th, td {
            padding: 12px 15px;
            border: 1px solid #e5e5e0;
            text-align: left;
        }
        th {
            background-color: #f0f0ed;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        tr:nth-child(even) {
            background-color: #fafafa;
        }
        tr:hover {
            background-color: #f0f0ed;
        }
        .collapsible-header {
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s ease;
        }
        .collapsible-header:hover {
            background-color: #f0f0ed;
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        .collapsible-content.open {
            max-height: 1000px; /* Adjust as needed for content height */
        }
        .chevron {
            transition: transform 0.3s ease;
        }
        .chevron.rotated {
            transform: rotate(180deg);
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .modal-details li {
            padding: 4px 0;
        }
    </style>
</head>
<body class="p-0">
    <div class="max-w-9xl mx-auto p-0 md:p-0">
        <header class="text-center p-6 md:p-10" style="display: none;">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-2">2026 北海道九天八夜</h1>
            <p class="text-xl text-gray-500 font-light">一趟從札幌到函館的冬日冒險</p>
        </header>

        <div class="card rounded-xl p-4 md:p-8">
            <div class="flex flex-wrap justify-center md:justify-start gap-2 p-2 bg-gray-100 rounded-full mb-6">
                <button id="tab-overview" class="pill-tab-button active flex-1 md:flex-none text-center text-gray-600 font-semibold focus:outline-none">
                    旅程總覽
                </button>
                <button id="tab-itinerary" class="pill-tab-button flex-1 md:flex-none text-center text-gray-600 font-semibold focus:outline-none">
                    詳細行程
                </button>
                <button id="tab-lodging" class="pill-tab-button flex-1 md:flex-none text-center text-gray-600 font-semibold focus:outline-none">
                    住宿資訊
                </button>
                <button id="tab-restaurants" class="pill-tab-button flex-1 md:flex-none text-center text-gray-600 font-semibold focus:outline-none">
                    餐廳推薦
                </button>
                <button id="tab-map" class="pill-tab-button flex-1 md:flex-none text-center text-gray-600 font-semibold focus:outline-none">
                    旅行地圖
                </button>
                 <button id="tab-Prepare" class="pill-tab-button flex-1 md:flex-none text-center text-gray-600 font-semibold focus:outline-none">
                    行程準備
                </button>
                <button id="tab-expenses" class="pill-tab-button flex-1 md:flex-none text-center text-gray-600 font-semibold focus:outline-none">
                    費用分析
                </button>
            </div>

            <div id="content-overview" class="tab-content active bg-white rounded-b-lg p-4 md:p-6">
                <div class="mb-6">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-700">核心資訊</h2>
                    <p class="text-gray-500 mb-6">
                        這份九天八夜自由行全攻略，為你彙整所有必備資訊，從預算、交通到每日行程，讓你輕鬆掌握旅程核心，隨時準備出發。
                    </p>
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 text-center">
                        <div class="bg-gray-100 p-4 rounded-xl">
                            <h3 class="font-bold text-gray-700">9天8夜</h3>
                            <p class="text-sm text-gray-500">行程時長</p>
                        </div>
                        <div class="bg-gray-100 p-4 rounded-xl">
                            <h3 class="font-bold text-gray-700">1/18-1/26</h3>
                            <p class="text-sm text-gray-500">2026 冬季</p>
                        </div>
                        <div class="bg-gray-100 p-4 rounded-xl">
                            <h3 class="font-bold text-gray-700">札幌進/函館出</h3>
                            <p class="text-sm text-gray-500">主要路線</p>
                        </div>
                        <div class="bg-gray-100 p-4 rounded-xl">
                            <h3 class="font-bold text-gray-800">$54,641</h3>
                            <p class="text-sm text-gray-500">預估費用/人</p>
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-700">航班資訊</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>日期</th>
                                    <th>行程時間</th>
                                    <th>航班</th>
                                    <th>價錢</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1/18</td>
                                    <td>12:30-17:20</td>
                                    <td>TR892</td>
                                    <td class="text-red-500">$9,630</td>
                                </tr>
                                <tr>
                                    <td>1/26</td>
                                    <td>18:00-21:35</td>
                                    <td>JX861</td>
                                    <td class="text-red-500">$13,488</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-700">行程總覽</h2>
                    <div class="p-4 rounded-xl bg-gray-50">
                        <ul class="list-disc ml-6 space-y-2 text-gray-600">
                            <li><span class="font-semibold">第一天 (1/18)</span>：桃園 > 新千歲機場 > 札幌，前往飯店辦理入住，正式踏上雪國之旅。</li>
                            <li><span class="font-semibold">第二天 (1/19)</span>：札幌市區一日遊，感受北海道神宮的靜謐與札幌啤酒博物館的熱情。</li>
                            <li><span class="font-semibold">第三天 (1/20)</span>：札幌市區一日遊，遊覽夢幻的白色戀人工廠、充滿文藝氣息的北海道大學、大通公園與熱鬧的狸小路。</li>
                            <li><span class="font-semibold">第四天 (1/21)</span>：札幌近郊，前往ES CON FIELD感受棒球氛圍，晚上欣賞藻岩山百萬級夜景。</li>
                            <li><span class="font-semibold">第五天 (1/22)</span>：小樽一日遊，漫步運河，感受這個充滿浪漫與歷史的小鎮。</li>
                            <li><span class="font-semibold">第六天 (1/23)</span>：從札幌前往登別地獄谷，感受火山地熱的震撼，傍晚入住洞爺湖溫泉飯店。</li>
                            <li><span class="font-semibold">第七天 (1/24)</span>：享受洞爺湖的美景，隨後前往函館，探索五稜郭公園的獨特星形要塞。</li>
                            <li><span class="font-semibold">第八天 (1/25)</span>：函館市區觀光，逛朝市、金森倉庫群，晚上欣賞世界三大夜景之一的函館山夜景。</li>
                            <li><span class="font-semibold">第九天 (1/26)</span>：函館市區，前往機場，帶著滿滿的回憶回國。</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="content-itinerary" class="tab-content p-4 md:p-6 bg-white rounded-b-lg">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">詳細行程</h2>
                <div class="space-y-6">
                    <!-- Day 1 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/18 (日) - 踏上雪國之旅</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-18.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">07:00:</span> 台南高鐵站集合。</li>
                                    <li><span class="font-semibold">07:14-09:00:</span> 搭乘高鐵從台南前往桃園機場。</li>
                                    <li><span class="font-semibold">12:30-17:20:</span> 桃園國際機場飛往新千歲機場。</li>
                                    <li><span class="font-semibold">17:20-19:00:</span> 在新千歲機場逛逛並享用晚餐。</li>
                                    <li><span class="font-semibold">19:30-20:13:</span> 搭乘 JR 從新千歲機場前往札幌車站。</li>
                                    <li><span class="font-semibold">20:30:</span> 抵達京王Prelia酒店辦理入住手續。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 2 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/19 (一) - 札幌市區巡禮</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-19.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">07:30:</span> 享用早餐，為一天的行程補充滿滿能量。</li>
                                    <li><span class="font-semibold">08:30-11:00:</span> 參拜莊嚴的北海道神宮，並在周邊的圓山公園、動物園散步。</li>
                                    <li><span class="font-semibold">11:00-12:00:</span> 前往充滿歷史感的札幌啤酒博物館。</li>
                                    <li><span class="font-semibold">12:30-14:00:</span> 在博物館內享用午餐。</li>
                                    <li><span class="font-semibold">14:00-17:00:</span> 深入參觀札幌啤酒博物館，了解北海道的啤酒歷史。</li>
                                    <li><span class="font-semibold">17:00-17:30:</span> 前往札幌車站，準備享用晚餐。</li>
                                    <li><span class="font-semibold">18:00:</span> 晚餐品嚐奧芝商店的美味湯咖哩。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 3 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/20 (二) - 札幌的文藝與熱鬧</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-20.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">08:00:</span> 享用早餐。</li>
                                    <li><span class="font-semibold">09:15-10:00:</span> 從札幌車站前往夢幻的白色戀人工廠。</li>
                                    <li><span class="font-semibold">10:00-12:00:</span> 在白色戀人工廠參觀並品嚐甜點。</li>
                                    <li><span class="font-semibold">12:00-12:45:</span> 返回札幌車站，準備前往下一站。</li>
                                    <li><span class="font-semibold">14:00-15:30:</span> 漫步在北海道大學的銀杏大道，參觀校內的恐龍化石。</li>
                                    <li><span class="font-semibold">16:00-18:00:</span> 悠閒地逛逛大通公園，並登上電視塔眺望市景。</li>
                                    <li><span class="font-semibold">18:15-20:00:</span> 前往熱鬧的狸小路商店街購物與用餐。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 4 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/21 (三) - 棒球與百萬夜景</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-21.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">07:30:</span> 起床。</li>
                                    <li><span class="font-semibold">08:30:</span> 前往 ES CON FIELD，感受日本職棒的魅力。</li>
                                    <li><span class="font-semibold">10:00:</span> 參加 ES CON FIELD 的導覽，深入了解球場。</li>
                                    <li><span class="font-semibold">11:00-12:00:</span> 在球場周邊享用午餐。</li>
                                    <li><span class="font-semibold">12:00-13:00:</span> 從 ES CON FIELD 返回札幌車站。</li>
                                    <li><span class="font-semibold">13:00-14:00:</span> 登上 JR T38 展望台，在高空欣賞札幌全景。</li>
                                    <li><span class="font-semibold">14:00-17:00:</span> 前往藻岩山，準備欣賞著名的夜景。</li>
                                    <li><span class="font-semibold">18:00-20:00:</span> 在狸小路附近享用美味的北海道燒肉。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 5 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/22 (四) - 浪漫小樽一日遊</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-22.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">07:00:</span> 起床。</li>
                                    <li><span class="font-semibold">08:06-08:53:</span> 搭乘火車從札幌前往小樽。</li>
                                    <li><span class="font-semibold">09:07-10:11:</span> 前往天狗山展望台。</li>
                                    <li><span class="font-semibold">10:11-11:30:</span> 在天狗山欣賞小樽市區與港口的景色。</li>
                                    <li><span class="font-semibold">11:36-12:26:</span> 從天狗山返回小樽車站。</li>
                                    <li><span class="font-semibold">12:30-14:00:</span> 午餐時間，在三角市場或若雞時代尋找美食。</li>
                                    <li><span class="font-semibold">14:00-17:00:</span> 漫步在小樽運河、堺町通。</li>
                                    <li><span class="font-semibold">17:00-17:33:</span> 搭車返回札幌。</li>
                                    <li><span class="font-semibold">18:00:</span> 晚餐在札幌市區覓食。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 6 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/23 (五) - 登別地獄谷與溫泉之夜</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-23.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">06:00:</span> 起床。</li>
                                    <li><span class="font-semibold">07:00:</span> 前往札幌車站。</li>
                                    <li><span class="font-semibold">07:30-08:44:</span> 從札幌車站搭火車到登別車站。</li>
                                    <li><span class="font-semibold">08:52-09:30:</span> 搭車前往登別地獄谷。</li>
                                    <li><span class="font-semibold">09:30-10:30:</span> 探訪登別地獄谷，感受地熱景觀的震撼。</li>
                                    <li><span class="font-semibold">10:30-11:50:</span> 返回登別車站。</li>
                                    <li><span class="font-semibold">12:10-12:51:</span>搭火車前往洞爺車站。</li>
                                    <li><span class="font-semibold">13:00-13:20:</span> 前往飯店寄放行李。</li>
                                    <li><span class="font-semibold">13:20-16:00:</span> 吃午餐，並在溫泉街悠閒散步。</li>
                                    <li><span class="font-semibold">18:30:</span> 在飯店享用豐盛的晚餐。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 7 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/24 (六) - 洞爺湖畔前往函館</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-24.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">07:30-08:45:</span> 起床並在飯店享用早餐。</li>
                                    <li><span class="font-semibold">09:00-10:00:</span> 搭乘遊覽船遊覽洞爺湖。</li>
                                    <li><span class="font-semibold">11:00:</span> 回飯店拿行李，準備前往洞爺車站。</li>
                                    <li><span class="font-semibold">11:30-12:40:</span> 在車站附近享用午餐。</li>
                                    <li><span class="font-semibold">12:51-14:41:</span> 搭火車從洞爺前往函館。</li>
                                    <li><span class="font-semibold">15:30-17:30:</span> 前往五稜郭公園，欣賞獨特的星形要塞。</li>
                                    <li><span class="font-semibold">18:00:</span> 在五稜郭附近享用美味的成吉思汗烤肉。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 8 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/25 (日) - 函館日夜之美</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-25.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">08:00:</span> 起床。</li>
                                    <li><span class="font-semibold">09:00:</span> 逛逛函館朝市，品嚐最新鮮的海產。</li>
                                    <li><span class="font-semibold">10:00-11:30:</span> 漫步金森紅磚倉庫群，感受異國風情。</li>
                                    <li><span class="font-semibold">11:30-13:00:</span> 午餐時間，來一個必吃的小丑漢堡。</li>
                                    <li><span class="font-semibold">13:30-15:00:</span> 探索八幡坂與函館教堂群。</li>
                                    <li><span class="font-semibold">15:00-16:30:</span> 搭乘纜車前往函館山，等待百萬夜景。</li>
                                    <li><span class="font-semibold">17:00:</span> 晚餐時間，品嚐鳥辰的燒鳥。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Day 9 -->
                    <div class="border rounded-lg">
                        <div class="collapsible-header p-4 flex justify-between items-center bg-gray-50 rounded-t-lg">
                            <h3 class="text-lg font-bold text-gray-800">1/26 (一) - 美好的旅程尾聲</h3>
                            <svg class="chevron w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content p-4">
                            <div class="flex flex-col md:flex-row-reverse md:justify-between space-y-4 md:space-y-0 md:space-x-8">
                                <img src="https://raw.githubusercontent.com/den3315x-tai/Hokkaido/refs/heads/main/1-26.jpg" class="w-full md:w-1/2 h-128 object-cover rounded-lg">
                                <ul class="list-disc ml-6 space-y-2">
                                    <li><span class="font-semibold">08:30:</span> 起床用早餐並辦理退房，行李寄放在飯店。</li>
                                    <li><span class="font-semibold">09:30-11:00:</span> 選擇參觀函館市熱帶植物園，或是前往大沼國家公園。</li>
                                    <li><span class="font-semibold">14:30:</span> 回飯店拿行李，準備前往機場。</li>
                                    <li><span class="font-semibold">15:00:</span> 抵達機場，辦理報到手續。</li>
                                    <li><span class="font-semibold">18:00-21:35:</span> 搭機回國，帶著滿滿的回憶與紀念品，結束這趟美好的旅程。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="content-lodging" class="tab-content p-4 md:p-6 bg-white rounded-b-lg">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">住宿資訊</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>日期</th>
                                <th>飯店</th>
                                <th>特色</th>
                                <th>價錢</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1/18-1/23</td>
                                <td><a class="text-blue-600" href="https://maps.app.goo.gl/oo2b2WGkUb5sE7nCA" target="_blank">京王Prelia酒店</a></td>
                                <td>靠近車站，交通便利</td>
                                <td class="text-red-500">$9,385</td>
                            </tr>
                            <tr>
                                <td>1/23-1/24</td>
                                <td><a class="text-blue-600" href="https://maps.app.goo.gl/WUU2oDrmGhgcuWYf6" target="_blank">The Lake Suit湖之栖</a></td>
                                <td>洞爺湖畔，享絕美湖景</td>
                                <td class="text-red-500">$7,214</td>
                            </tr>
                            <tr>
                                <td>1/24-1/26</td>
                                <td><a class="text-blue-600" href="https://maps.app.goo.gl/f3t7GUrzqG94SDAT7" target="_blank">OMO5 函館</a></td>
                                <td>特色主題，深度體驗函館</td>
                                <td class="text-red-500">$4,063</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div id="content-restaurants" class="tab-content p-4 md:p-6 bg-white rounded-b-lg">
                <h2 class="text-2xl font-semibold mb-6 text-gray-700">餐廳推薦 (依地區分類)</h2>

                <!-- 札幌地區 (Sapporo) -->
                <div class="mb-8 p-4 border rounded-lg bg-gray-50">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">📍 札幌市區 (Sapporo)</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>類別</th>
                                    <th>店名</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>海鮮丼</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/EiqNbnPg8ZXqx3w88" target="_blank">Sapporo Kaisen-don Senmon Ten Sushi Donburi</a></td>
                                </tr>
                                <tr>
                                    <td>迴轉壽司</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/DGiPEtcb8HefdQsX6" target="_blank">根室花丸 JR Tower</a></td>
                                </tr>
                                <tr>
                                    <td>燒肉</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/vsdVKKXHL7WtymqS6" target="_blank">北海道燒肉 北牛</a></td>
                                </tr>
                                <tr>
                                    <td>湯咖哩</td>
                                    <td><a class="text-blue-600" href="https://www.google.com/maps/search/?api=1&query=Sapporo%2C%20Chuo%20Ward%2C%20Kita%204%20Jonishi%2C%201%20Chome%20%E3%83%9B%E3%82%AF%E3%83%AC%E3%83%B3%E3%83%93%E3%83%AB%20B1F%20%E3%83%91%E3%83%BC%E3%83%AB%E3%82%BF%E3%82%A6%E3%83%B3" target="_blank">奥芝商店湯咖哩</a></td>
                                </tr>
                                <tr>
                                    <td>湯咖哩</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/Uz4R3GXXh3CbDxwi7" target="_blank">湯咖哩 Yellow</a></td>
                                </tr>
                                <tr>
                                    <td>甜點</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/yZQrVDfGXGzoCBZb8" target="_blank">北菓樓 札幌本館</a></td>
                                </tr>
                                <tr>
                                    <td>甜點</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/2RcfMSnaTuLB7tVB6" target="_blank">六花亭 札幌本店</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 洞爺湖地區 (Toyako) -->
                <div class="mb-8 p-4 border rounded-lg bg-gray-50">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">♨️ 洞爺湖 (Toyako)</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>類別</th>
                                    <th>店名</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>湯咖哩</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/HNRPnadsg2quUGbW9" target="_blank">SoupCurry HLAHAL-ハラハル-</a></td>
                                </tr>
                                <tr>
                                    <td>燒肉丼飯</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/6ptXoECG4NQKE5K88" target="_blank">湯炭火ダイニングアペコロ</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 函館地區 (Hakodate) -->
                <div class="p-4 border rounded-lg bg-gray-50">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">🚢 函館 (Hakodate)</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>類別</th>
                                    <th>店名</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>成吉思汗烤肉</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/8rURFiwmnPGH768s9" target="_blank">大黒屋 函館五稜郭店</a></td>
                                </tr>
                                <tr>
                                    <td>燒鳥 (居酒屋)</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/FPQjbdLZVURXJCKm8" target="_blank">鳥辰十字街店</a></td>
                                </tr>
                                <tr>
                                    <td>燒鳥 (居酒屋)</td>
                                    <td><a class="text-blue-600" href="https://maps.app.goo.gl/uEAWCCoGYqYxZNf3A" target="_blank">長谷川商店</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="content-map" class="tab-content p-0 md:p-0 bg-white rounded-b-lg">
                <div class="relative w-full rounded-lg" style="height: 75vh;">
                    <iframe 
                        src="https://www.google.com/maps/d/embed?mid=1mltIDX4-B6rG-VHdnv-5NMG6K7OoPDY&ehbc=2E312F" 
                        class="absolute top-0 left-0 w-full h-full" 
                        frameborder="0" 
                        allowfullscreen="" 
                        aria-hidden="false" 
                        tabindex="0">
                    </iframe>
                </div>
            </div>

            <div id="content-expenses" class="tab-content p-4 md:p-6 bg-white rounded-b-lg text-center">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">費用分析</h2>
                <p class="text-gray-500 mb-6">這份表格和圖表詳細解析了這趟旅程的每筆開銷，幫助你更好地掌握預算。</p>
                <div class="mb-4">
                    <p class="text-xl font-bold text-gray-800">總費用：<span class="text-red-500" id="total-cost-display"></span></p>
                </div>
                <div id="chart-container" class="w-full h-80"></div>
                <div class="mt-8 flex flex-wrap justify-center gap-4 text-sm text-left" id="legend-container"></div>
            </div>

            <div id="content-Prepare" class="tab-content p-4 md:p-6 bg-white rounded-b-lg">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">行程準備</h2>
                <div class="space-y-6">
                    <!-- 卡片 1: 重要文件與交通 -->
                    <div class="border rounded-lg p-6">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center mb-3">
                            <span class="mr-2">📄</span>重要文件與交通
                        </h3>
                        <ul class="list-disc ml-6 space-y-2 text-gray-600">
                            <li>護照與簽證: 確保護照有效期限足夠，並檢查是否需要簽證。</li>
                            <li>機票與住宿: 備妥電子機票、住宿預訂單的列印或電子檔。</li>
                            <li>交通票券: 預先購買好的北海道 JR PASS、巴士票券等。</li>
                            <li>旅遊保險: 準備旅遊平安險或不便險的證明。</li>
                        </ul>
                    </div>
                    <!-- 卡片 2: 服裝與保暖 -->
                    <div class="border rounded-lg p-6">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center mb-3">
                            <span class="mr-2">🧤</span>服裝與保暖
                        </h3>
                        <ul class="list-disc ml-6 space-y-2 text-gray-600">
                            <li>洋蔥式穿法: 採用「內層排汗、中層保暖、外層防風防水」的三層式穿法。</li>
                            <li>內層: 選擇吸濕排汗的發熱衣或機能服飾。</li>
                            <li>中層: 羊毛衫、刷毛衣或羽絨背心。</li>
                            <li>外層: 防風防水的大衣或羽絨外套，最好有連帽設計。</li>
                            <li>手套、帽子、圍巾: 這些是防止熱量流失的關鍵，建議多帶幾雙備用。</li>
                            <li>雪靴: 選擇防滑、防水且內層有刷毛的雪靴，避免滑倒和受凍。</li>
                            <li>厚襪子: 羊毛襪或專用的滑雪襪，保持腳部溫暖。</li>
                        </ul>
                    </div>
                    <!-- 卡片 3: 實用物品與注意事項 -->
                    <div class="border rounded-lg p-6">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center mb-3">
                            <span class="mr-2">🎒</span>實用物品與注意事項
                        </h3>
                        <ul class="list-disc ml-6 space-y-2 text-gray-600">
                            <li>手機與充電設備: 攜帶行動電源，低溫會加速手機耗電。</li>
                            <li>保濕用品: 北海道冬季乾燥，護唇膏、護手霜和保濕乳液是必備品。</li>
                            <li>暖暖包: 可隨身攜帶，用於手腳保暖或黏貼在身上。</li>
                            <li>防滑鞋釘: 如果雪靴沒有足夠的防滑功能，可購買防滑鞋釘套在鞋底。</li>
                            <li>交通時間: 冬季交通可能因風雪延遲，務必預留足夠的轉乘時間。</li>
                            <li>室內外溫差: 避免頻繁進出室內外，以免感冒。</li>
                            <li>日落時間: 冬季日落早，提早規劃行程以充分利用白天的時間。</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Modal for detailed expenses -->
            <div id="details-modal" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h3 id="modal-title" class="text-xl font-bold mb-4"></h3>
                    <ul id="modal-details-list" class="modal-details list-disc ml-4 space-y-1"></ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.pill-tab-button');
            const contents = document.querySelectorAll('.tab-content');
            const modal = document.getElementById('details-modal');
            const closeButton = document.querySelector('.close-button');
            const modalTitle = document.getElementById('modal-title');
            const modalDetailsList = document.getElementById('modal-details-list');

            // --- 費用分析數據與函式 ---
            const expensesData = [
                { category: '機票', value: 23118 },
                { category: '住宿', value: 9385 + 7214 + 4063 },
                { category: '交通 (日本)', value: 4541 },
                { category: '交通 (台灣)', value: 1190 + 2300 },
                { category: '通訊/保險', value: 1130 + 1700 }
            ];

            expensesData.sort((a, b) => b.value - a.value);

            const detailedExpensesData = {
                '機票': [
                    { name: '札幌進（TR892）', cost: 9630 },
                    { name: '函館出（JX861）', cost: 13488 }
                ],
                '住宿': [
                    { name: '京王Prelia酒店', cost: 9385 },
                    { name: 'The Lake Suit湖之栖', cost: 7214 },
                    { name: 'OMO5 函館', cost: 4063 }
                ],
                '交通 (日本)': [
                    { name: '北海道 JR PASS 五日券', cost: 4541 },
                ],
                '交通 (台灣)': [
                    { name: '高鐵（台南 > 桃園）', cost: 1190 },
                    { name: '桃園包車回台南', cost: 2300 }
                ],
                '通訊/保險': [
                    { name: '網卡', cost: 1130 },
                    { name: '旅平險', cost: 1700 }
                ]
            };

            function createPieChart() {
                const totalCost = expensesData.reduce((sum, item) => sum + item.value, 0);
                document.getElementById('total-cost-display').textContent = `$${totalCost.toLocaleString()}`;

                const chartContainer = document.getElementById('chart-container');
                const width = chartContainer.clientWidth;
                const height = Math.min(width, 320);
                const radius = Math.min(width, height) / 2.5;

                d3.select(chartContainer).select('svg').remove();
                d3.select('#legend-container').html('');

                const svg = d3.select(chartContainer)
                    .append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .append("g")
                    .attr("transform", `translate(${width / 2}, ${height / 2})`);

                const color = d3.scaleOrdinal(d3.schemeCategory10);

                const pie = d3.pie().value(d => d.value).sort(null);
                const arc = d3.arc().innerRadius(0).outerRadius(radius);
                const pieData = pie(expensesData);

                svg.selectAll('path')
                    .data(pieData)
                    .enter()
                    .append('path')
                    .attr('d', arc)
                    .attr('fill', (d, i) => color(i))
                    .attr('stroke', 'white')
                    .style('stroke-width', '2px')
                    .style('opacity', 0.8)
                    .on('click', function(event, d) {
                        showDetailsModal(d.data);
                    });

                const legend = d3.select('#legend-container')
                    .selectAll('.legend-item')
                    .data(expensesData)
                    .enter()
                    .append('div')
                    .attr('class', 'legend-item flex items-center mb-2');

                legend.append('div')
                    .attr('class', 'w-3 h-3 rounded-full mr-2')
                    .style('background-color', (d, i) => color(i));

                legend.append('span')
                    .text(d => `${d.category} ($${d.value.toLocaleString()})`);
            }

            function showDetailsModal(data) {
                const details = detailedExpensesData[data.category];
                if (details) {
                    modalTitle.textContent = data.category;
                    modalDetailsList.innerHTML = '';
                    details.forEach(item => {
                        const li = document.createElement('li');
                        li.textContent = `${item.name}: $${item.cost.toLocaleString()}`;
                        modalDetailsList.appendChild(li);
                    });
                    modal.style.display = 'block';
                }
            }

            closeButton.onclick = function() {
                modal.style.display = 'none';
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }

            // Listen for window resize to redraw chart
            window.addEventListener('resize', () => {
                if (document.getElementById('content-expenses').classList.contains('active')) {
                    createPieChart();
                }
            });
            
            // --- 頁籤切換與功能初始化 ---
            function setActiveTab(tabId) {
                const targetId = tabId.replace('tab-', 'content-');
                
                tabs.forEach(item => item.classList.remove('active'));
                contents.forEach(item => item.classList.remove('active'));

                document.getElementById(tabId).classList.add('active');
                const targetContent = document.getElementById(targetId);
                if (targetContent) {
                    targetContent.classList.add('active');
                } else {
                    console.error(`Error: Element with ID "${targetId}" not found.`);
                }

                if (tabId === 'tab-expenses') {
                    createPieChart();
                }
            }

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    setActiveTab(tab.id);
                });
            });

            // Handle collapsible itinerary sections
            const collapsibleHeaders = document.querySelectorAll('.collapsible-header');
            collapsibleHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const chevron = header.querySelector('.chevron');
                    
                    if (content.classList.contains('open')) {
                        content.classList.remove('open');
                        chevron.classList.remove('rotated');
                    } else {
                        document.querySelectorAll('.collapsible-content.open').forEach(c => c.classList.remove('open'));
                        document.querySelectorAll('.chevron.rotated').forEach(c => c.classList.remove('rotated'));

                        content.classList.add('open');
                        chevron.classList.add('rotated');
                    }
                });
            });

            // Initial active state
            setActiveTab('tab-overview');
        });
    </script>
</body>
</html>
